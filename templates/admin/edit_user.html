{% extends "base.html" %}
{% from 'macros.html' import csrf_token, form_field %}
{% block title %}Edit User - South Austin Bass Club{% endblock %}
{% block content %}
<div class="container"><div class="row justify-content-center"><div class="col-md-6">
<div class="card shadow">
    <div class="card-header bg-warning text-white"><h4 class="mb-0"><i class="bi bi-person-gear me-2"></i>Edit User</h4></div>
    <div class="card-body">
        <form method="POST" action="/admin/users/{{ edit_user.id }}/edit">
            {{ csrf_token(request) }}
            {{ form_field('Name', 'name', required=true, value=edit_user.name) }}
            {{ form_field('Email <small class="text-secondary">(optional for guests)</small>', 'email', type='email', value=edit_user.email or '', placeholder='Leave empty or use first.last@sabc.com', help_text='If left empty for guests, a default email will be generated (first.last@sabc.com)') }}
            {{ form_field('Phone Number <small class="text-secondary">(optional)</small>', 'phone', type='tel', value=edit_user.phone or '', placeholder='+1234567890', help_text='Include country code (e.g., +1 for US)') }}
            {% for field, label in [('member', 'Club Member'), ('is_admin', 'Administrator')] %}
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="{{ field }}" name="{{ field }}" {% if edit_user[field] %}checked{% endif %}>
                <label class="form-check-label" for="{{ field }}">{{ label }}</label>
            </div>
            {% endfor %}

            <div class="mb-3">
                <label class="form-label">Officer Positions <small class="text-secondary">(optional - select all that apply)</small></label>
                <div class="form-text mb-2">Officer positions are tracked per year. Changes will apply to the current year ({{ current_year }}).</div>
                {% set positions = [
                    'President',
                    'Vice-President',
                    'Secretary',
                    'Treasurer',
                    'Media Director',
                    'Tournament Director',
                    'Assistant Tournament Director',
                    'Technology Director'
                ] %}
                {% for position in positions %}
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="officer_positions" value="{{ position }}" id="position_{{ loop.index }}" {% if position in current_officer_positions %}checked{% endif %}>
                    <label class="form-check-label" for="position_{{ loop.index }}">
                        {{ position }}
                    </label>
                </div>
                {% endfor %}
            </div>

            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <a href="/admin/users" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-warning"><i class="bi bi-save me-1"></i>Save Changes</button>
            </div>
        </form>
    </div>
</div>
</div></div></div>
{% endblock %}
